<!DOCTYPE html><html><head><title>Bryn.h</title><meta http-equiv="content-type" content="text/html; charset=UTF-8"><link rel="stylesheet" media="all" href="../doc-style.css"><script src="../doc-filelist.js"></script><script>var relativeDir = '../', thisFile = '/Users/bryn/.otis/templates/tmpl.jade', defaultSidebar = true;</script><script src="../doc-script.js"></script></head><body><div id="sidebar_wrapper"><div id="sidebar_switch"><span class="tree">Files</span><span class="headings">Headings</span></div><div id="tree"></div><div id="headings"><div class="heading h1"><a href="#define-macros">Define macros</a></div><div class="heading h4"><a href="#key-...-">Key(...)</a></div><div class="heading h1"><a href="#macros-from-concisekit">Macros from ConciseKit</a></div><div class="heading h1"><a href="#typedefs">Typedefs</a></div><div class="heading h3"><a href="#blocks">Blocks</a></div><div class="heading h3"><a href="#enum-brynkitdispatchsourcestate">enum BrynKitDispatchSourceState</a></div><div class="heading h1"><a href="#image-related-macros">Image-related macros</a></div><div class="heading h3"><a href="#uiimagewithbundlepng--">UIImageWithBundlePNG()</a></div><div class="heading h1"><a href="#arc-non-arc-compatibility-helpers">ARC/non-ARC compatibility helpers</a></div><div class="heading h1"><a href="#gcd-concurrency-helpers">GCD/concurrency helpers</a></div></div></div><div id="sidebar-toggle"></div><div id="container"><div class="background highlight"></div><table cellpadding="0" cellspacing="0"><tbody><tr><td class="docs"></td><td class="code highlight"></td></tr><tr><td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>
<p>Bryn.h
 BrynKit</p>

<p>Created by bryn austin bellomy on 7/18/12.
 Copyright (c) 2012 bryn austin bellomy. All rights reserved.</p></td><td class="code highlight"><div class="highlight"><pre><span class="cp">#ifndef __Bryn__</span>
<span class="cp">#define __Bryn__  </span><span class="c1">// is this even possible????</span>

<span class="cp">#import &lt;libextobjc/metamacros.h&gt;</span></pre></div></td></tr><tr><td class="docs"><div class="dox"><div class="summary">
<div class="pilwrap" id="define-macros">
  <h1>
    <a href="#define-macros" class="pilcrow">&#182;</a>
    Define macros
  </h1>
</div>
</div><div class="body"></div></div></td><td class="code highlight"><div class="highlight"><pre><span class="cp">#pragma mark- Define macros</span>
<span class="cp">#pragma mark-</span></pre></div></td></tr><tr><td class="docs"><div class="dox"><div class="summary">
<div class="pilwrap" id="key-...-">
  <h4>
    <a href="#key-...-" class="pilcrow">&#182;</a>
    Key(...)
  </h4>
</div>
</div><div class="body"><p>Defines a pointer to a static <code>NSString</code> literal to be used for key-value stuff,
<code>NSDictionary</code> keys, etc.  Ex:</p>

<div class='highlight'><pre><code language=''>Key(MyNotificationUserInfoKey_Clowns);
// ... expands to `static NSString *const MyNotificationUserInfoKey_Clowns = @"MyNotificationUserInfoKey_Clowns"`

Key(MyNotificationUserInfoKey_Clowns, @"clowns");
// ... expands to `static NSString *const MyNotificationUserInfoKey_Clowns = @"clowns"`

NSLog(@"the clowns in the userinfo dictionary: %@", userInfo[MyNotificationUserInfoKey_Clowns]);
</code></pre></div></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span class="dox_type">identifier</span><code class="name">identifier</code> &mdash; <span class="description">The name of the NSString variable.</span></div><div class="dox_tag_detail"><span class="dox_type">NSString*</span><code class="name">value</code> &mdash; <span class="description">The contents of the NSString (optional).</span></div></div></div></td><td class="code highlight"><div class="highlight"><pre><span class="cp">#define Key(...) \</span>
<span class="cp">    metamacro_if_eq(1, metamacro_argcount(__VA_ARGS__)) \</span>
<span class="cp">        ( static NSString *const metamacro_head(__VA_ARGS__) = @ metamacro_stringify(metamacro_head(__VA_ARGS__)) ) \</span>
<span class="cp">        ( static NSString *const metamacro_head(__VA_ARGS__) = metamacro_tail(__VA_ARGS__) )</span></pre></div></td></tr><tr><td class="docs"><div class="dox"><div class="summary">
<div class="pilwrap" id="macros-from-concisekit">
  <h1>
    <a href="#macros-from-concisekit" class="pilcrow">&#182;</a>
    Macros from ConciseKit
  </h1>
</div>
</div><div class="body"><p>I can't always justify including the whole of <a href="http://github.com/petejkim/ConciseKit">ConciseKit</a>
just because I want to use <code>$new(...)</code> a few times in a helper library.  So these are here mainly
for me to be able to have my cake and eat it too.</p></div></div></td><td class="code highlight"><div class="highlight"><pre><span class="cp">#ifndef __has_feature</span>
<span class="cp">#   define __has_feature(x) 0</span>
<span class="cp">#endif</span>

<span class="cp">#if __has_feature(objc_arc)</span>
<span class="cp">#   define IF_ARC(with, without) with</span>
<span class="cp">#else</span>
<span class="cp">#   define IF_ARC(with, without) without</span>
<span class="cp">#endif</span>

<span class="cp">#ifndef $new</span>
<span class="cp">#   define $new(Klass) IF_ARC([[Klass alloc] init], [[[Klass alloc] init] autorelease])</span>
<span class="cp">#endif</span>

<span class="cp">#ifndef $str</span>
<span class="cp">#   define $str(...)   [NSString stringWithFormat:__VA_ARGS__]</span>
<span class="cp">#endif</span>

<span class="cp">#ifndef $point</span>
<span class="cp">#   define $point(val)       [NSValue valueWithCGPoint:(val)]</span>
<span class="cp">#endif</span>

<span class="cp">#ifndef $selector</span>
<span class="cp">#   define $selector(val)    [NSValue valueWithPointer:@selector(val)]</span>
<span class="cp">#endif</span></pre></div></td></tr><tr><td class="docs"><div class="dox"><div class="summary">
<div class="pilwrap" id="typedefs">
  <h1>
    <a href="#typedefs" class="pilcrow">&#182;</a>
    Typedefs
  </h1>
</div>
</div><div class="body"></div></div></td><td class="code highlight"><div class="highlight"><pre><span class="cp">#pragma mark- Typedefs</span>
<span class="cp">#pragma mark-</span></pre></div></td></tr><tr><td class="docs"><div class="dox"><div class="summary">
<div class="pilwrap" id="blocks">
  <h3>
    <a href="#blocks" class="pilcrow">&#182;</a>
    Blocks
  </h3>
</div>
</div><div class="body"><p>Saves a little bit of tedious typing.</p></div></div></td><td class="code highlight"><div class="highlight"><pre><span class="k">typedef</span> <span class="nf">void</span><span class="p">(</span><span class="o">^</span><span class="n">BoolBlock</span><span class="p">)(</span><span class="kt">BOOL</span><span class="p">);</span>
<span class="k">typedef</span> <span class="nf">void</span><span class="p">(</span><span class="o">^</span><span class="n">UIntBlock</span><span class="p">)(</span><span class="n">NSUInteger</span><span class="p">);</span>
<span class="k">typedef</span> <span class="nf">void</span><span class="p">(</span><span class="o">^</span><span class="n">ErrorBlock</span><span class="p">)(</span><span class="n">NSError</span> <span class="o">*</span><span class="p">);</span>
<span class="k">typedef</span> <span class="nf">void</span><span class="p">(</span><span class="o">^</span><span class="n">NotificationBlock</span><span class="p">)(</span><span class="n">NSNotification</span> <span class="o">*</span><span class="p">);</span>
<span class="k">typedef</span> <span class="nf">void</span><span class="p">(</span><span class="o">^</span><span class="n">DictionaryBlock</span><span class="p">)(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">);</span>
<span class="k">typedef</span> <span class="nf">void</span><span class="p">(</span><span class="o">^</span><span class="n">IdBlock</span><span class="p">)(</span><span class="kt">id</span><span class="p">);</span>
<span class="k">typedef</span> <span class="nf">void</span><span class="p">(</span><span class="o">^</span><span class="n">UpdateCollectionCallbackBlock</span><span class="p">)(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="n">updatedCollection</span><span class="p">);</span>
<span class="k">typedef</span> <span class="nf">void</span><span class="p">(</span><span class="o">^</span><span class="n">UpdateCollectionBlock</span><span class="p">)(</span><span class="n">NSMutableDictionary</span> <span class="o">*</span><span class="n">collection</span><span class="p">,</span> <span class="n">UpdateCollectionCallbackBlock</span> <span class="n">callback</span><span class="p">);</span></pre></div></td></tr><tr><td class="docs"><div class="dox"><div class="summary">
<div class="pilwrap" id="enum-brynkitdispatchsourcestate">
  <h3>
    <a href="#enum-brynkitdispatchsourcestate" class="pilcrow">&#182;</a>
    enum BrynKitDispatchSourceState
  </h3>
</div>
</div><div class="body"><p>Use this to keep track of the state of <code>dispatch_source</code> objects so that you don't
over-resume them, try to cancel them when they're suspended, etc.</p></div></div></td><td class="code highlight"><div class="highlight"><pre><span class="k">typedef</span> <span class="k">enum</span> <span class="o">:</span> <span class="n">NSUInteger</span> <span class="p">{</span>
    <span class="n">BrynKitDispatchSourceState_Suspended</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">BrynKitDispatchSourceState_Resumed</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">BrynKitDispatchSourceState_Canceled</span> <span class="o">=</span> <span class="mi">3</span>
<span class="p">}</span> <span class="n">BrynKitDispatchSourceState</span><span class="p">;</span></pre></div></td></tr><tr><td class="docs"><div class="dox"><div class="summary">
<div class="pilwrap" id="image-related-macros">
  <h1>
    <a href="#image-related-macros" class="pilcrow">&#182;</a>
    Image-related macros
  </h1>
</div>
</div><div class="body"></div></div></td><td class="code highlight"><div class="highlight"><pre><span class="cp">#pragma mark- image-related macros</span>
<span class="cp">#pragma mark-</span></pre></div></td></tr><tr><td class="docs"><div class="dox"><div class="summary">
<div class="pilwrap" id="uiimagewithbundlepng--">
  <h3>
    <a href="#uiimagewithbundlepng--" class="pilcrow">&#182;</a>
    UIImageWithBundlePNG()
  </h3>
</div>
</div><div class="body"><p>Load a PNG file from the main bundle.  People use <code>+[UIImage imageNamed:]</code>
because it's much easier than the (minimum) method calls you have to make to
load a UIImage the 'right' way.  With a macro like this, there's no excuse.
Note: the image filename you pass to this macro should not contain its file
extension (".png").</p></div><div class="details"><div class="dox_tag_title">Params</div><div class="dox_tag_detail"><span class="dox_type">NSString*</span><code class="name">filename</code> &mdash; <span class="description">The filename of the image without its ".png" extension.</span></div></div></div></td><td class="code highlight"><div class="highlight"><pre><span class="cp">#if !defined(UIImageWithBundlePNG)</span>
<span class="cp">#   define UIImageWithBundlePNG(x) ([UIImage imageWithContentsOfFile: [[NSBundle mainBundle] pathForResource:(x) ofType: @&quot;png&quot;]])</span>
<span class="cp">#endif</span></pre></div></td></tr><tr><td class="docs"><div class="dox"><div class="summary">
<div class="pilwrap" id="arc-non-arc-compatibility-helpers">
  <h1>
    <a href="#arc-non-arc-compatibility-helpers" class="pilcrow">&#182;</a>
    ARC/non-ARC compatibility helpers
  </h1>
</div>
</div><div class="body"><p>everything in this section comes courtesy of the fantastic MBProgressHUD
class by matej bukovinski [<a href='http://github.com/jdg/MBProgressHUD'>http://github.com/jdg/MBProgressHUD</a>]</p></div></div></td><td class="code highlight"><div class="highlight"><pre><span class="cp">#pragma mark- ARC/non-ARC compatibility helpers</span>
<span class="cp">#pragma mark-</span>

<span class="cp">#ifndef bryn_strong</span>
    <span class="err">#</span><span class="k">if</span> <span class="n">__has_feature</span><span class="p">(</span><span class="n">objc_arc</span><span class="p">)</span>
        <span class="err">#</span><span class="n">define</span> <span class="n">bryn_strong</span> <span class="n">strong</span>
    <span class="err">#</span><span class="k">else</span>
        <span class="err">#</span><span class="n">define</span> <span class="n">bryn_strong</span> <span class="n">retain</span>
    <span class="err">#</span><span class="n">endif</span>
<span class="cp">#endif</span>

<span class="cp">#ifndef bryn_weak</span>
    <span class="err">#</span><span class="k">if</span> <span class="n">__has_feature</span><span class="p">(</span><span class="n">objc_arc_weak</span><span class="p">)</span>
        <span class="err">#</span><span class="n">define</span>   <span class="n">bryn_weak</span>   <span class="n">weak</span>
        <span class="err">#</span><span class="n">define</span> <span class="n">__bryn_weak</span> <span class="n">__weak</span>
    <span class="err">#</span><span class="n">elif</span> <span class="n">__has_feature</span><span class="p">(</span><span class="n">objc_arc</span><span class="p">)</span>
        <span class="err">#</span><span class="n">define</span>   <span class="n">bryn_weak</span>   <span class="n">unsafe_unretained</span>
        <span class="err">#</span><span class="n">define</span> <span class="n">__bryn_weak</span> <span class="n">__unsafe_unretained</span>
    <span class="err">#</span><span class="k">else</span>
        <span class="err">#</span><span class="n">define</span>   <span class="n">bryn_weak</span>   <span class="n">assign</span>
        <span class="err">#</span><span class="n">define</span> <span class="n">__bryn_weak</span> <span class="n">__assign</span>
    <span class="err">#</span><span class="n">endif</span>
<span class="cp">#endif</span>

<span class="cp">#if __has_feature(objc_arc)</span>
    <span class="err">#</span><span class="n">define</span> <span class="n">BrynAutorelease</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span> <span class="n">exp</span>
    <span class="err">#</span><span class="n">define</span> <span class="n">BrynRelease</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span> <span class="n">exp</span>
    <span class="err">#</span><span class="n">define</span> <span class="n">BrynRetain</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span> <span class="n">exp</span>
<span class="cp">#else</span>
    <span class="err">#</span><span class="n">define</span> <span class="n">BrynAutorelease</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span> <span class="p">[</span><span class="n">exp</span> <span class="n">autorelease</span><span class="p">]</span>
    <span class="err">#</span><span class="n">define</span> <span class="n">BrynRelease</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span> <span class="p">[</span><span class="n">exp</span> <span class="n">release</span><span class="p">]</span>
    <span class="err">#</span><span class="n">define</span> <span class="n">BrynRetain</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span> <span class="p">[</span><span class="n">exp</span> <span class="n">retain</span><span class="p">]</span>
<span class="cp">#endif</span></pre></div></td></tr><tr><td class="docs"><div class="dox"><div class="summary">
<div class="pilwrap" id="gcd-concurrency-helpers">
  <h1>
    <a href="#gcd-concurrency-helpers" class="pilcrow">&#182;</a>
    GCD/concurrency helpers
  </h1>
</div>
</div><div class="body"></div></div></td><td class="code highlight"><div class="highlight"><pre><span class="cp">#pragma mark- GCD/concurrency helpers</span>
<span class="cp">#pragma mark-</span>

<span class="k">extern</span> <span class="kt">void</span> <span class="n">dispatch_safe_sync</span><span class="p">(</span><span class="n">dispatch_queue_t</span> <span class="n">queue</span><span class="p">,</span> <span class="n">dispatch_block_t</span> <span class="n">block</span><span class="p">);</span>



<span class="cp">#endif </span><span class="c1">// __Bryn__</span>
</pre></div></td></tr></tbody></table></div></body></html>